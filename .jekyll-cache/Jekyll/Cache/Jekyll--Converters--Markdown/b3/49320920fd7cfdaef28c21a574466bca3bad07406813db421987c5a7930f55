I"¡<h2 id="ä¸€é˜¿é‡Œäº‘å’Œdockeræ­å»ºä¸»ä»æœåŠ¡å™¨">ä¸€ã€é˜¿é‡Œäº‘å’ŒDockeræ­å»ºä¸»ä»æœåŠ¡å™¨</h2>
<p>1ã€é˜¿é‡Œäº‘ç¯å¢ƒä¸ºcentosï¼Œé¦–å…ˆå®‰è£…docker</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# yum install docker-ce-3:19.03.13-3.el8 -y
</code></pre></div></div>

<p>2ã€ç„¶åæ‹‰å–dockeré•œåƒï¼Œè¿™é‡Œä½¿ç”¨5.7ç‰ˆæœ¬çš„mysqlï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# docker pull mysql:5.7
</code></pre></div></div>

<p>3ã€ä½¿ç”¨æ­¤é•œåƒå¯åŠ¨å®¹å™¨ï¼Œè¿™é‡Œéœ€è¦åˆ†åˆ«å¯åŠ¨ä¸»ä»ä¸¤ä¸ªå®¹å™¨</p>

<p>Master(ä¸»)ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# docker run -p 3309:3306 --name primary -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7
</code></pre></div></div>

<p>Slave(ä»)ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# docker run -p 3308:3306 --name secondary -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7
</code></pre></div></div>
<p>primaryå¯¹å¤–æ˜ å°„çš„ç«¯å£æ˜¯3309ï¼Œsecondaryå¯¹å¤–æ˜ å°„çš„ç«¯å£æ˜¯3308ã€‚ä½¿ç”¨docker pså‘½ä»¤æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES
c2e509a41b29        mysql:5.7           "docker-entrypoint.sâ€¦"   3 weeks ago         Up 2 weeks          33060/tcp, 0.0.0.0:3308-&gt;3306/tcp   secondary
ec4a868c061d        mysql:5.7           "docker-entrypoint.sâ€¦"   3 weeks ago         Up 2 weeks          33060/tcp, 0.0.0.0:3309-&gt;3306/tcp   primary
</code></pre></div></div>
<p>4ã€å®¹å™¨ä¸­Mysqlæµ‹è¯•ï¼šä½¿ç”¨ä¸»å®¿ä¸»æœºIP:3309,å’Œä¸»å®¿ä¸»æœºIP:3308è¿æ¥Mysqlï¼Œèƒ½å¤Ÿè¿é€šåˆ™ç¬¬ä¸€æ­¥æˆåŠŸã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# mysql -h ä¸»å®¿ä¸»æœºIP -P 3309 -uroot -p123456 
</code></pre></div></div>

<blockquote>
  <p>é˜¿é‡Œäº‘éœ€è¦é…ç½®æš´éœ²ç«¯å£è§„åˆ™æš´éœ²3308å’Œ3309ç«¯å£</p>
</blockquote>

<h2 id="äºŒé…ç½®ä¸»æ•°æ®åº“primary">äºŒã€é…ç½®ä¸»æ•°æ®åº“(primary)</h2>
<p>1ã€è¿›å…¥åˆ°primaryå®¹å™¨å†…éƒ¨ï¼Œä¿®æ”¹mysqlçš„é…ç½®æ–‡ä»¶my.cnfï¼Œé…ç½®server-idã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# docker exec -it ec4 /bin/bash
root@ec4a868c061d:/# cd /etc/mysql
root@ec4a868c061d:/# vi my.cnf
</code></pre></div></div>

<p>é€šè¿‡docker exec -it 627a2368c865 /bin/bashå‘½ä»¤è¿›å…¥åˆ°Masterå®¹å™¨å†…éƒ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡docker exec -it mysql-master /bin/bashå‘½ä»¤è¿›å…¥ã€‚627a2368c865æ˜¯å®¹å™¨çš„id,è€Œmysql-masteræ˜¯å®¹å™¨çš„åç§°ã€‚</p>

<p>cd /etc/mysqlåˆ‡æ¢åˆ°/etc/mysqlç›®å½•ä¸‹ï¼Œç„¶åvi my.cnfå¯¹my.cnfè¿›è¡Œç¼–è¾‘ã€‚æ­¤æ—¶ä¼šæŠ¥å‡ºbash: vi: command not foundï¼Œéœ€è¦æˆ‘ä»¬åœ¨dockerå®¹å™¨å†…éƒ¨è‡ªè¡Œå®‰è£…vimã€‚ä½¿ç”¨apt-get install vimå‘½ä»¤å®‰è£…vim</p>

<p>ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š</p>

<p>Reading package listsâ€¦ Done
Building dependency tree     <br />
Reading state informationâ€¦ Done
E: Unable to locate package vim
æ‰§è¡Œapt-get updateï¼Œç„¶åå†æ¬¡æ‰§è¡Œapt-get install vimå³å¯æˆåŠŸå®‰è£…vimã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨vimç¼–è¾‘my.cnfï¼Œåœ¨my.cnfä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>

<p>[mysqld]</p>
<h2 id="åŒä¸€å±€åŸŸç½‘å†…æ³¨æ„è¦å”¯ä¸€">åŒä¸€å±€åŸŸç½‘å†…æ³¨æ„è¦å”¯ä¸€</h2>
<p>server-id=100</p>
<h2 id="å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½å¯ä»¥éšä¾¿å–å…³é”®">å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œå¯ä»¥éšä¾¿å–ï¼ˆå…³é”®ï¼‰</h2>
<p>log-bin=mysql-bin
é…ç½®å®Œæˆä¹‹åï¼Œéœ€è¦é‡å¯mysqlæœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆã€‚ä½¿ç”¨service mysql restartå®Œæˆé‡å¯ã€‚é‡å¯mysqlæœåŠ¡æ—¶ä¼šä½¿å¾—dockerå®¹å™¨åœæ­¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦docker start mysql-masterå¯åŠ¨å®¹å™¨ã€‚</p>

<p>ä¸‹ä¸€æ­¥åœ¨Masteræ•°æ®åº“åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·ï¼Œæˆäºˆç”¨æˆ· slave REPLICATION SLAVEæƒé™å’ŒREPLICATION CLIENTæƒé™ï¼Œç”¨äºåœ¨ä¸»ä»åº“ä¹‹é—´åŒæ­¥æ•°æ®ã€‚</p>

<p>flush privileges; (åˆ›å»ºç”¨æˆ·å‰å…ˆåˆ·æ–°ä¸€ä¸‹æƒé™ï¼Œä¸ç„¶å¯èƒ½æŠ¥é”™ã€‚å‚è€ƒï¼šhttps://blog.csdn.net/u011575570/article/details/51438841)</p>

<p>CREATE USER â€˜slaveâ€™@â€™%â€™ IDENTIFIED BY â€˜123456â€™;</p>

<p>GRANT REPLICATION SLAVE, REPLICATION CLIENT ON <em>.</em> TO â€˜slaveâ€™@â€™%â€™;</p>

<h2 id="ä¸‰é…ç½®ä»æ•°æ®åº“secondary">ä¸‰ã€é…ç½®ä»æ•°æ®åº“(secondary)</h2>

<h2 id="å››å¼€å¯ä¸»ä»å¤åˆ¶">å››ã€å¼€å¯ä¸»ä»å¤åˆ¶</h2>

<h2 id="äº”èŠ±å¼æ‰å‘">äº”ã€èŠ±å¼æ‰å‘</h2>

<h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2>
<ol>
  <li><a href="https://www.cnblogs.com/linjiaxin/p/12761296.html">åŸºäºDockerçš„Mysqlä¸»ä»å¤åˆ¶æ­å»º</a></li>
</ol>
:ET